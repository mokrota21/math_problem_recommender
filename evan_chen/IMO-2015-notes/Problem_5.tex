Solve the functional equation
\[ f(x+f(x+y)) + f(xy) = x + f(x+y) + yf(x) \]
for $f \colon \RR \to \RR$.