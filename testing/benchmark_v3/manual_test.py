from ranking import compute_similarity_nli

cell = {'Anchor': 'Problem. Find all odd positive integers n greater than 1 such that for any relatively prime divisors a and $b$ of $n$ , the number $a+b-1$ is also a divisor of $n$ .  \n\n(2001 Russian Mathematical Olympiad)  \n\nSolution. We will call a number ”good” if it satisfies the given conditions. It is not difficult to see that all prime powers are good. Suppose $n$ is a good number that has at least two distinct prime factors. Let $n=p^{r}s$ , where $p$ is the smallest prime dividing $n$ and $s$ is not divisible by $p$ . Because $n$ is good, $p+s-1$ must divide $n$ . For any prime $q$ dividing $s$ , $s<p+s-1<s+q$ , so $q$ does not divide $p+s-1$ . Therefore, the only prime factor of $p+s-1$ is $p$ . Then $s=p^{c}-p+1$ for some $c>1$ . Because $p^{c}$ must also divide $n$ , $p^{c}+s-1=2p^{c}-p$ divides $n$ . Because $2p^{c-1}-1$ has no factors of $p$ , it must divide $s$ . But a simple computation shows that $\\frac{p-1}{2}<\\frac{p^{c}-p+1}{2p^{c-1}-1}<\\frac{p+1}{2}$ , therefore $2p^{c-1}-1$ cannot divide $s$ .  \n\n', 'Golden': 'Problem. Find the smallest positive integer $K$ such that every $K$ -element subset of $\\{1,2,\\ldots,50\\}$ contains two distinct elements $a,b$ such that $a+b$ divides ab.  \n\n(1996 Chinese Mathematical Olympiad)  \n\nSolution. The minimal value is $k=39$ . Suppose $a,b\\in S$ are such that $a+b$ divides $a b$ . Let $c=g c d(a,b)$ , and put $a=c a_{1}$ , $b=c b_{1}$ , so that $a_{1}$ and $b_{1}$ are relatively prime. Then $c(a_{1}+b_{1})$ divides $c^{2}a_{1}b_{1}$ , so $a_{1}+b_{1}$ divides $c a_{1}b_{1}$ . Since $a_{1}$ and $b_{1}$ have no common factor, neither do $a_{1}$ and $a_{1}+b_{1}$ , or $b_{1}$ and $a_{1}+b_{1}$ . In short, $a_{1}+b_{1}$ divides $c$ .  \n\nSince $S\\subseteq\\{1,\\dots,50\\}$ , we have $a+b\\leq99$ , so $c(a_{1}+b_{1})\\leq99$ , which implies $a_{1}+b_{1}\\leq9$ ; on the other hand, of course $a_{1}+b_{1}\\geq3$ . An exhaustive search produces 23 pairs $a,b$ satisfying the condition:  \n\n$$\n\\begin{array}{c c c}{{a_{1}+b_{1}=3}}&{{(6,3),(12,6),(18,9),(24,12),}}&{{}}\\\\ {{}}&{{}}&{{}}\\\\ {{a_{1}+b_{1}=4}}&{{(12,4),(24,8),(42,21),(48,24)}}&{{}}\\\\ {{a_{1}+b_{1}=4}}&{{(12,4),(24,8),(36,12),(48,16)}}&{{}}\\\\ {{a_{1}+b_{1}=5}}&{{(20,5),(40,10),(15,10),(30,20),(45,30)}}&{{}}\\\\ {{a_{1}+b_{1}=6}}&{{(30,6)}}&{{(30,6)}}&{{}}\\\\ {{a_{1}+b_{1}=7}}&{{}}&{{(42,7),(35,14),(28,21)}}&{{}}\\\\ {{a_{1}+b_{1}=8}}&{{}}&{{(40,24)}}&{{}}\\\\ {{a_{1}+b_{1}=9}}&{{}}&{{(45,36)}}&{{}}\\end{array}\n$$  \n', 'Silver': 'Problem. Let  \n\n$$\n\\prod_{n=1}^{1996}(1+n x^{3^{n}})=1+a_{1}x^{k_{1}}+a_{2}x^{k_{2}}+\\cdot\\cdot\\cdot+a_{m}x^{k_{m}},\n$$  \n\nwhere $a_{1},a_{2},\\ldots,a_{m}$ are nonzero and $k_{1}<k_{2}<\\dots<k_{m}$ , Find $a_{1996}$ .  \n\n(1996 Turkish Mathematical Olympiad)  \n\nSolution. Note that $k_{i}$ is the number obtained by writing $i$ in base 2 and reading the result as a number in base 3, and $a_{i}$ is the sum of the exponents of the powers of 3 used. In particular, $1996=2^{10}+2^{9}+2^{8}+2^{7}+2^{6}+2^{3}+2^{2}$ , so  \n\n$$\na_{1996}=10+9+8+7+6+3+2=45.\n$$  \n\n', 'Wrong': 'Problem. Prove that there are no positive integers x and y such that  \n\n$$\nx^{5}+y^{5}+1=(x+2)^{5}+(y-3)^{5}.\n$$  \n\nSolution. Notice that $z^{5}\\equiv z$ (mod 10), hence $x+y+1\\equiv(x+2)+(y-3)$ (mod 10), impossible.  \n\n'}
model_name = "facebook/bart-large-mnli"
query = "Problem that uses divisibility to limit number of options."
texts = list(cell.values())
sim = compute_similarity_nli(model_name=model_name, query=query, texts=texts, chunk=True, max_length=1024, stride=20)
print(sim)